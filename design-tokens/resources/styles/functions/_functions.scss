@use "sass:map";
@use "sass:math";

$types: "light", "dark";

@function strip-unit($num) {
  @return $num / ($num * 0 + 1);
}

@function pxToRem($pxValue) {
  @if $unit == "rem" {
    @return (calc($pxValue / 16) * 1rem);
  } @else {
    @return ($pxValue * 1px);
  }
}

@function shade($type, $c, $percentage) {
  @if $type == "light" {
    @return (lighten($c, $percentage));
  } @else {
    @return (darken($c, $percentage));
  }
}

@function rootColor($type, $key, $style) {
  $color: map-get($style, "color");
  $shades: map-get($style, "shades");

  $e: ();

  // Base Color
  $class: "--" + $key + "-" + $type;
  $base: (
    $class: $color,
  );
  $e: map-merge($e, $base);

  // Shades
  @each $t in $types {
    @each $shade in $shades {
      $s: shade($t, $color, $shade);
      $class: "--" + $key + "-" + $type + "-" + $t + "-" + $shade;
      $q: (
        $class: $s,
      );
      $e: map-merge($e, $q);
    }
  }

  @return ($e);
}

@function rootFont($type, $style) {
  $font: map-get($style, "type");
  $uri: map-get($style, "uri");
  $sizes: map-get($style, "sizes");

  $e: ();

  // Font Type
  $class: "--" + $type;
  $base: (
    $class: $uri,
  );
  $e: map-merge($e, $base);

  // Font Sizes
  @each $size in $sizes {
    $s: pxToRem($size);
    $class: "--fs-" + $size;
    $q: (
      $class: $s,
    );
    $e: map-merge($e, $q);
  }
  @return ($e);
}

@function rootSpacing($type, $style) {
  $type: map-get($style, "type");
  $size: map-get($style, "size");
  $s: pxToRem($size);
  $e: ();

  // Spacings
  $class: "--spacing-" + $type;
  $spacing: ($class: $s);
  $e: map-merge($e, $spacing);

  @return ($e);
}

@function utilityColor($type, $key, $style) {
  $type: map-get($style, "type");
  $color: map-get($style, "color");
  $shades: map-get($style, "shades");

  $e: ();

  /// Base Color
  $class: "." + $key + "-" + $type;
  $var: "var(--" + $key + "-" + $type + ")";
  $base: (
    $class: $var,
  );
  $e: map-merge($e, $base);

  /// Shades
  @each $t in $types {
    @each $shade in $shades {
      $class: "." + $key + "-" + $type + "-" + $t + "-" + $shade;
      $var: "var(--" + $key + "-" + $type + "-" + $t + "-" + $shade + ")";
      $q: (
        $class: $var,
      );
      $e: map-merge($e, $q);
    }
  }

  @return ($e);
}

@function utilityFont($type, $style) {
  $type: map-get($style, "type");
  $uri: map-get($style, "uri");
  $sizes: map-get($style, "sizes");

  $e: ();

  /// Font Type
  $class: "--" + $type;
  $var: "var(--" + $type + ")";
  $base: (
    $class: $var,
  );
  $e: map-merge($e, $base);

  /// Sizes
  @each $size in $sizes {
    $class: "--" + $type + "-" + $size;
    $var: "var(--" + $type + "-" + $size + ")";
    $q: (
      $class: $var,
    );
    $e: map-merge($e, $q);
  }

  @return ($e);
}
